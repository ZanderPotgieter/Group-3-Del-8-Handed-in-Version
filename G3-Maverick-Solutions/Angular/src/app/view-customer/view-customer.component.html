<body>
    <h1>Customer Details</h1>
    <div class="divright">
        <label style="color:orange" onclick="window.location.href='https://ghelp.z1.web.core.windows.net/SearchCustomer.html'">Help <i style="color:orange" class="tiny material-icons">help</i></label>
</div>
    <form [formGroup]="cusForm">
        <div class="card" *ngIf = "showSearch">
        <div class="divleft"  >
            <label class="subheadinglabel" >Enter Name and Surname To search </label>
        <br>
            <label for="name">Name:     </label>
                  <input class="searchinput" type="text" formControlName="name" [(ngModel)]="name" [ngModelOptions]="{standalone: true}" id="name" name="name" pattern="[a-zA-Z ]*" required>
                  <span style="color:red" *ngIf="cusForm.get('name').errors && (cusForm.get('name').touched || cusForm.get('name').dirty)">
                      <br><span *ngIf="cusForm.get('name').errors.required">Name is required.<br></span>
                      <span *ngIf="cusForm.get('name').errors.pattern">Only text characters.<br></span>
                  </span>
       <br>
                  <label for="surname">Surname:     </label>
                  <input class="searchinput" type="text" formControlName="surname" [(ngModel)]="surname" [ngModelOptions]="{standalone: true}" id="surname" name="surname" pattern="[a-zA-Z ]*" required>
                  <span style="color:red" *ngIf="cusForm.get('surname').errors && (cusForm.get('surname').touched || cusForm.get('surname').dirty)">
                     <br> <span *ngIf="cusForm.get('surname').errors.required">Surname is required.<br></span>
                      <span *ngIf="cusForm.get('surname').errors.pattern">Only text characters.<br></span>
                  </span>
        </div>

        <div class="divleft">
            <button type="submit"(click)="searchCustomer()">Search</button>
            <button type="submit" (click)="gotoCustomerManagment()">Cancel</button>
        </div>

        <table class="table table-striped">  
            <thead class="thead-dark">  
              <tr>  
                <th>Name</th>  
                <th>Surname</th>  
                <th>Cell No</th>  
                <th>Email</th>  
                <th>Suburb</th>  
              </tr>  
            </thead>  
            <tbody>  
              <tr *ngFor="let cus of allCus | async">  
                <td>{{cus.CusName}}</td>  
                <td>{{cus.CusSurname}}</td>  
                <td>{{cus.CusCell}}</td>  
                <td>{{cus.CusEmail}}</td>  
                <td>{{cus.CusSuburb}}</td> 
              </tr>  
            </tbody>  
          </table>  
    </div>
    <br>

    <div class="card" *ngIf = "showResults">
       

        <br>
        <div class="divleft" >
            <label class="subheadinglabel"> Searched Customer Details:</label>
        </div>
    
        <div class="divleft">
            <label for="CusName">Name:</label>
                  <input type="text" formControlName="CusName" [(ngModel)]="customer.CusName" [ngModelOptions]="{standalone: true}" id="CusName" name="CusName" pattern="[a-zA-Z ]*" required [readonly] = "this.inputEnabled">
                  <span style="color:red" *ngIf="cusForm.get('CusName').errors && (cusForm.get('CusName').touched || cusForm.get('CusName').dirty)">
                    <br> <span *ngIf="cusForm.get('CusName').errors.required"><br>Name is required.<br></span>
                      <span *ngIf="cusForm.get('CusName').errors.pattern">Only text characters.<br></span>
                  </span>
          </div>

        <br>
        <div class="divleft" >
            <label for="CusSurname">Surname:</label>
                <input type="text" formControlName="CusSurname" [(ngModel)]="customer.CusSurname" [ngModelOptions]="{standalone: true}" id="CusSurname" name="CusSurname" pattern="[a-zA-Z ]*" required [readonly] = "this.inputEnabled">
                <span style="color:red" *ngIf="cusForm.get('CusSurname').errors && (cusForm.get('CusSurname').touched || cusForm.get('CusSurname').dirty)">
                    <br><span *ngIf="cusForm.get('CusSurname').errors.required">Surname is required.<br></span>
                    <span *ngIf="cusForm.get('CusSurname').errors.pattern">Only text characters.<br></span>
                </span>
        </div>

        <br>
        <div class="divleft" >
            <label for="CusCell">Cell:</label>
                <input type="text" formControlName="CusCell" [(ngModel)]="customer.CusCell" [ngModelOptions]="{standalone: true}" id="CusCell" name="CusCell" pattern="[0-9 ]*" required [readonly] = "this.inputEnabled">
                <br>
                <span style="color:red" *ngIf="cusForm.get('CusCell').errors && (cusForm.get('CusCell').touched || cusForm.get('CusCell').dirty)">
                    <span *ngIf="cusForm.get('CusCell').errors.required">Cell is required.<br></span>
                    <span *ngIf="cusForm.get('CusCell').errors.minlength">Cell must be 10 numbers<br></span>
                    <span *ngIf="cusForm.get('CusCell').errors.maxlength">Cell must be 10 numbers<br></span>
                    <span *ngIf="cusForm.get('CusCell').errors.pattern">Only numbers allowed.<br></span>
                </span>
        </div>
        <br>
        <div class="divleft"  >
            <label for="CusEmail">Email:</label>
              <input type="text" formControlName="CusEmail" [(ngModel)]="customer.CusEmail" [ngModelOptions]="{standalone: true}" id="CusEmail" name="CusEmail" pattern="[a-zA-Z ]*" required [readonly] = "this.inputEnabled">
              <br>
              <span style="color:red" *ngIf="cusForm.get('CusEmail').errors && (cusForm.get('CusEmail').touched || cusForm.get('CusEmail').dirty)">
                  <span *ngIf="cusForm.get('CusEmail').errors.required">Email is required.<br></span>
                  <span *ngIf="cusForm.get('CusEmail').errors.email">Please enter in a valid email address.<br></span>
              </span>
        </div>

        <br>
        <div class="divleft" >
            <label for="CusStreetNr">Street No:</label>
                <input type="text" formControlName="CusStreetNr" [(ngModel)]="customer.CusStreetNr" [ngModelOptions]="{standalone: true}" id="CusStreetNr" name="CusStreetNr" pattern="[0-9 ]*" required [readonly] = "this.inputEnabled">
                <br>
                <span style="color:red" *ngIf="cusForm.get('CusStreetNr').errors && (cusForm.get('CusStreetNr').touched || cusForm.get('CusStreetNr').dirty)">
                    <span *ngIf="cusForm.get('CusStreetNr').errors.required">Street No is required.<br></span>
                    <span *ngIf="cusForm.get('CusStreetNr').errors.maxlength">Max 8 numbers.<br></span>
                    <span *ngIf="cusForm.get('CusStreetNr').errors.pattern">Only numbers allowed.<br></span>
                </span>
        </div>

        <br>
        <div class="divleft" >
            <label for="CusStreet">Street:    </label>
                  <input type="text" formControlName="CusStreet" [(ngModel)]="customer.CusStreet" [ngModelOptions]="{standalone: true}" id="CusStreet" name="CusStreet" pattern="[a-zA-Z ]*" required [readonly] = "this.inputEnabled">
                  <br>
                  <span style="color:red" *ngIf="cusForm.get('CusStreet').errors && (cusForm.get('CusStreet').touched || cusForm.get('CusStreet').dirty)">
                      <span *ngIf="cusForm.get('CusStreet').errors.required">Street is required.<br></span>
                  </span>
        </div>
        <br>
        <div class="divleft" >
            <label for="CusCode">Postal Code:</label>
                <input type="text" formControlName="CusCode" [(ngModel)]="customer.CusCode" [ngModelOptions]="{standalone: true}" id="CusCode" name="CusCode" pattern="[0-9 ]*" required placeholder="0000" [readonly] = "this.inputEnabled">
                <br>
                <span style="color:red" *ngIf="cusForm.get('CusCode').errors && (cusForm.get('CusCode').touched || cusForm.get('CusCode').dirty)">
                    <span *ngIf="cusForm.get('CusCode').errors.required">Postal Code is required.<br></span>
                    <span *ngIf="cusForm.get('CusCode').errors.minlength">Postal Code is 4 digits.<br></span>
                    <span *ngIf="cusForm.get('CusCode').errors.maxlength">Postal Code is 4 digits.<br></span>
                    <span *ngIf="cusForm.get('CusCode').errors.pattern">Only numbers allowed.<br></span>
                </span>
        </div>
 
        <br>
        <div class="divleft" >
            <label for="CusSuburb">Suburb:</label>
                <input type="text" formControlName="CusSuburb" [(ngModel)]="customer.CusSuburb" [ngModelOptions]="{standalone: true}" id="CusSuburb" name="CusSuburb" pattern="[a-zA-Z ]*" required placeholder="Example: Hatfield" [readonly] = "this.inputEnabled">
                <br>
                <span style="color:red" *ngIf="cusForm.get('CusSuburb').errors && (cusForm.get('CusSuburb').touched || cusForm.get('CusSuburb').dirty)">
                    <span *ngIf="cusForm.get('CusSuburb').errors.required">Suburb is required.<br></span>
                    <span *ngIf="cusForm.get('CusSuburb').errors.pattern">Only text characters.<br></span>
                </span> 
        </div>
        <br><br>

        <div class="divleft" *ngIf="showButtons">
            <button type="submit" (click)="enableInputs()">Update</button>
            <button type="submit" (click)="deleteCustomer()">Delete</button>
            <button type="submit" (click)="gotoPlaceOrder()">Place Order</button>
         </div>

         <div class="divleft" *ngIf="showSave" >
         <button type="submit" (click)="updateCustomer()">Save</button>
         <button type="submit" (click)="cancel()">Cancel</button>
        </div>
        
    </div>
    
    </form>
</body>



